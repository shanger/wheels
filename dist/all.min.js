function createXHR(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(!window.ActiveXObject)throw new Error("浏览器不支持XHR对象！");for(var t=["MSXML2.XMLHttp","Microsoft.XMLHTTP"],e=0,n=t.length;e<n;e++)try{return new ActiveXObject(version[e])}catch(a){}}function ajax(t){function e(){200==n.status?t.success(n.responseText):alert("获取数据错误！错误代号："+n.status+"，错误信息："+n.statusText)}var n=createXHR();t.url=t.url+"?rand="+Math.random(),t.data=params(t.data),"get"===t.method&&(t.url+=t.url.indexOf("?")==-1?"?"+t.data:"&"+t.data),t.async===!0&&(n.onreadystatechange=function(){4==n.readyState&&e()}),n.open(t.method,t.url,t.async),"post"===t.method?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t.data)):n.send(null),t.async===!1&&e()}function params(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}